(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){e.exports=n(34)},29:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),s=n.n(i),c=(n(29),n(16)),o=n(17),l=n(6),u=n(9),m=n(7),p=n(10),f="http://localhost:3001",v=function(){return fetch("".concat(f,"/movies")).then(function(e){return e.json()})},d=function(e){return fetch("".concat(f,"/movies/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({my_list:!0})}).then(function(e){return e.json()})},h=function(e){return fetch("".concat(f,"/movies/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({my_list:!1})}).then(function(e){return e.json()})},y=function(){return fetch("".concat(f,"/genres")).then(function(e){return e.json()})},g=n(5),E=n(8),b=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={searchInput:""},n.updateSearch=function(e){n.setState({searchInput:e.target.value},function(){return n.props.searchMatchingMovies(n.state.searchInput)})},n.displayNumberOfResults=function(){if(n.state.searchInput.length>0)return"Found ".concat(n.props.results," ").concat(1==n.props.results?"movie":"movies",' with the query "').concat(n.state.searchInput,'"')},n.render=function(){return r.a.createElement("header",{className:"header"},r.a.createElement(E.b,{to:"/"},r.a.createElement("img",{src:"https://fontmeme.com/permalink/190707/fd4735271a0d997cbe19a04408c896fc.png",alt:"netflix-font",border:"0"})),r.a.createElement("div",{id:"navigation",className:"navigation"},r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(E.b,{to:"/my-list"},"My List"))))),r.a.createElement("form",{id:"search",className:"search"},r.a.createElement("input",{type:"search",placeholder:"Search for a title...",value:n.state.searchInput,onChange:n.updateSearch}),r.a.createElement("div",{className:"searchResults"},n.displayNumberOfResults())))},n}return Object(p.a)(t,e),t}(r.a.Component);function j(e){return r.a.createElement("div",{className:"movie"},r.a.createElement("img",{src:e.movie.poster_path}),r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"title"},e.movie.title),r.a.createElement("div",{className:"rating"},e.movie.vote_average,"/10"),r.a.createElement("div",{className:"plot"},e.movie.overview),r.a.createElement("div",{"data-toggled":e.movie.my_list,className:"listToggle",onClick:function(){return e.updateList(e.movie)}},r.a.createElement("div",null,r.a.createElement("i",{className:"fa fa-fw fa-plus"}),r.a.createElement("i",{className:"fa fa-fw fa-check"})))))}var L=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).displayMovie=function(e){return"My List"===e?n.props.movies.map(function(e){return r.a.createElement(j,{key:e.id,movie:e,updateList:n.props.updateList})}):n.props.movies.filter(function(e){return e.genre_ids.includes(n.props.genre.id)}).map(function(e){return r.a.createElement(j,{key:e.id,movie:e,updateList:n.props.updateList})})},n.render=function(){return r.a.createElement("div",{className:"titleList"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,n.props.title),r.a.createElement("div",{className:"titles-wrapper"},n.props.movies.map(function(e){return r.a.createElement(j,{key:e.id,movie:e,updateList:n.props.updateList})}))))},n}return Object(p.a)(t,e),t}(r.a.Component),O=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={movies:[],genres:[]},n.componentDidMount=function(){n.getDataFromAPI()},n.getDataFromAPI=function(){y().then(function(e){e.sort(function(e,t){return e.name.localeCompare(t.name)}),v().then(function(t){n.setState({genres:e,movies:t})})})},n.updateList=function(e){!1===e.my_list?d(e).then(function(){n.setState(function(t){var n=t.movies.findIndex(function(t){return t===e}),a=Object(o.a)({},t.movies[n]);a.my_list=!0;var r=Object(c.a)(t.movies);return r.splice(n,1,a),{movies:r}})}):!0===e.my_list&&h(e).then(function(){n.setState(function(t){var n=t.movies.findIndex(function(t){return t===e}),a=Object(o.a)({},t.movies[n]);a.my_list=!1;var r=Object(c.a)(t.movies);return r.splice(n,1,a),{movies:r}})})},n.searchMatchingMovies=function(e){console.log(e),""===e?n.getDataFromAPI():n.setState(function(){var t=n.state.movies.filter(function(t){return t.title.toLowerCase().includes(e.toLowerCase())||t.overview.toLowerCase().includes(e.toLowerCase())});return{movies:t,results:t.length}})},n.clasifyMovies=function(e){var t=n.state.movies.filter(function(t){return t.genre_ids.includes(e.id)});if(t.length>0)return r.a.createElement(L,{key:e.id,title:e.name,movies:t,genre:e,updateList:n.updateList})},n.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{searchMatchingMovies:n.searchMatchingMovies,movies:n.state.movies,results:n.state.results}),r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/"},n.state.genres.map(function(e){return n.clasifyMovies(e)})),r.a.createElement(g.a,{path:"/my-list"},r.a.createElement(L,{title:"My List",key:"my-list",movies:n.state.movies.filter(function(e){return!0===e.my_list}),updateList:n.updateList}))))},n}return Object(p.a)(t,e),t}(r.a.Component);s.a.render(r.a.createElement(E.a,null,r.a.createElement(O,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.53ff9992.chunk.js.map